<!DOCTYPE html>
<html>
<head>
    <title>Add Expense</title>
</head>
<body>
    <h1>Add Expense</h1>

    {% if error %}
        <p style="color:red;">{{ error }}</p>
    {% endif %}

    <form method="POST">
        <label>Amount:</label>
        <!-- User types plain number -->
        <input type="number" step="0.01" min="0.01" name="amount" value="{{ amount or '' }}" required><br><br>

        <label>Category:</label>
        <select name="category" id="category" required onchange="checkOther()">
            <option value="" disabled {% if not category %}selected{% endif %}>Select a category</option>
            {% for cat in categories %}
                <option value="{{ cat }}" {% if cat == category %}selected{% endif %}>{{ cat }}</option>
            {% endfor %}
        </select>
        <input type="text" name="custom_category" id="custom_category" placeholder="Enter category" 
               style="display:none;" value="{{ custom_category or '' }}"><br><br>

        <label>Paid By:</label>
        <input type="text" name="paid_by" value="{{ paid_by or '' }}" required><br><br>

        <label>Date:</label>
        <input type="date" name="date" value="{{ date or '' }}"><br><br>

        <button type="submit">Add Expense</button>
    </form>

    <br>
    <a href="{{ url_for('expenses') }}">View All Expenses</a>
    <br>
    <a href="{{ url_for('manage') }}">â¬… Back to Management</a>

    <script>
    function checkOther() {
        var select = document.getElementById('category');
        var otherInput = document.getElementById('custom_category');
        if (select.value === 'Other') {
            otherInput.style.display = 'inline';
            otherInput.required = true;
        } else {
            otherInput.style.display = 'none';
            otherInput.required = false;
        }
    }
    window.onload = checkOther;
    </script>
</body>
</html>
